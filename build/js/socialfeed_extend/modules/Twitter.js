define(["socialfeed","handlebars","text!tmpl/Twitter.html"],function(e,t,n){function i(e){return $("<div/>").text(e).html()}function s(e){if(!e.entities)return i(e.text);var t={};$.each(e.entities.urls,function(e,n){t[n.indices[0]]=[n.indices[1],function(e){return"<a href='"+i(n.url)+"'>"+i(n.display_url)+"</a>"}]}),$.each(e.entities.hashtags,function(e,n){t[n.indices[0]]=[n.indices[1],function(e){return"<a href='http://twitter.com/search?q="+escape("#"+n.text)+"'>"+i(e)+"</a>"}]}),$.each(e.entities.user_mentions,function(e,n){t[n.indices[0]]=[n.indices[1],function(e){return"<a title='"+i(n.name)+"' href='http://twitter.com/"+i(n.screen_name)+"'>"+i(e)+"</a>"}]});var n="",r=0,s=0;for(s=0;s<e.text.length;++s){var o=t[s];if(o){var u=o[0],a=o[1];s>r&&(n+=i(e.text.substring(r,s))),n+=a(e.text.substring(s,u)),s=u-1,r=u}}return s>r&&(n+=i(e.text.substring(r,s))),n}var r=t.compile(n);return t.registerHelper("twitParse",function(e){return new t.SafeString(s(e))}),e.Modules.extend({url:function(){return"http://mib-twitfeed.herokuapp.com/?count="+(this.ident||10)},orderBy:function(e){return-(new Date(e.created_at)).getTime()},render:function(e){return r(e)}})});