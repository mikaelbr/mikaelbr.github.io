var fs=require("fs"),uglifyjs=require("uglify-js");module.exports=function(e){function t(e){var t="",n,r;for(n=0;n<e.length;++n)r=e[n],r.type==="comment1"?t+="//"+r.value+"\n":t+="/*"+r.value+"*/";return t}e.registerMultiTask("minwithcomments","Minify lang files with UglifyJS.",function(){var n=e.file.expandFiles(this.file.src),r,i,s,o;i=e.helper("concat",n,{separator:this.data.separator}),o=uglifyjs.parser.tokenizer(i),r=t(o().comments_before),r+=e.helper("uglify",i,e.config("uglify")),e.file.write(this.file.dest,r);if(this.errorCount)return!1;e.log.writeln('File "'+this.file.dest+'" created.'),e.helper("min_max_info",r,i)})};