define(["socialfeed","handlebars","text!tmpl/Twitter.html"],function(e,t,n){function r(e){return $("<div/>").text(e).html()}function i(e){if(!e.entities)return r(e.text);var t={};$.each(e.entities.urls,function(e,n){t[n.indices[0]]=[n.indices[1],function(e){return"<a href='"+r(n.url)+"'>"+r(n.display_url)+"</a>"}]}),$.each(e.entities.hashtags,function(e,n){t[n.indices[0]]=[n.indices[1],function(e){return"<a href='http://twitter.com/search?q="+escape("#"+n.text)+"'>"+r(e)+"</a>"}]}),$.each(e.entities.user_mentions,function(e,n){t[n.indices[0]]=[n.indices[1],function(e){return"<a title='"+r(n.name)+"' href='http://twitter.com/"+r(n.screen_name)+"'>"+r(e)+"</a>"}]});var n="",i=0,s=0;for(s=0;s<e.text.length;++s){var o=t[s];if(o){var u=o[0],a=o[1];s>i&&(n+=r(e.text.substring(i,s))),n+=a(e.text.substring(s,u)),s=u-1,i=u}}return s>i&&(n+=r(e.text.substring(i,s))),n}var s=t.compile(n);return t.registerHelper("twitParse",function(e){return new t.SafeString(i(e))}),e.Modules.extend({url:function(){return"http://mib-twitfeed.herokuapp.com/?count="+(this.ident||10)},orderBy:function(e){return-(new Date(e.created_at)).getTime()},render:function(e){return s(e)}})});